<div class="container">

  <mat-form-field *ngIf="filter" appearance="standard" style="width: 100%;">
    <mat-label>Filtro palabras clave</mat-label>
    <input matInput (keyup)="applyFilter($event)" #input>
  </mat-form-field>
  
  <table mat-table matSort matSortActive="col1" [dataSource]="dataSource" class="mat-elevation-z1">

    <ng-container *ngFor="let col of tableCols; index as i" matColumnDef="{{ col }}">

        <th mat-header-cell mat-sort-header *matHeaderCellDef> {{ tableHeaders[i] }}</th>


        <div [ngSwitch]="col">

          <div *ngSwitchCase="'status'">
            <td mat-cell *matCellDef="let item">

              <mat-slide-toggle [checked]="item[col]"></mat-slide-toggle>

            </td>
          </div>

          <div *ngSwitchCase="'img'">
            <td mat-cell *matCellDef="let item">
                <img *ngIf="item[col] != ''" class="circle-thumbnails" (mouseover)="onSelectImage(item[col])" (mouseout)="onSelectImage('')" [src]="item[col]" />
            </td>
          </div>

          <div *ngSwitchCase="'description'">
            <td class="cell-truncate-text" mat-cell *matCellDef="let item"> 
              <span> {{ item[col] }} </span>
            </td>
          </div>
          
          <div *ngSwitchCase="'code'">
            <td mat-cell *matCellDef="let item">
              {{ item[col] }} 
              <mat-icon class="copy-icon" [cdkCopyToClipboard]="clipboardCopy(item[col])" (click)="clipboardCopied()">content_copy</mat-icon>
              <p *ngIf="copied"> Copiado</p>
            </td>
          </div>

          <div *ngSwitchCase="'keywords'">
            <td mat-cell *matCellDef="let item">
              {{item[col].length}}
              <mat-icon matTooltip="{{item[col]}}" matTooltipPosition="right" matTooltipClass="tooltip" style="color:green; margin-left: 10px;" *ngIf="(item[col].length > 0)">done</mat-icon>
              <mat-icon matTooltip="{{item[col]}}" matTooltipPosition="right" matTooltipClass="tooltip" style="color:red; margin-left: 10px" *ngIf="!(item[col].length > 0)">close</mat-icon>
              
                <!--mat-chip-list >
                  <mat-chip *ngFor="let keyword of item[col]">
                    {{keyword}}
                  </mat-chip>
                </mat-chip-list-->
            </td>
          </div>

          <div *ngSwitchCase="'seasons'">
            <td mat-cell *matCellDef="let item">
              {{item[col].length}}
              <mat-icon matTooltip="{{item[col]}}" matTooltipPosition="right" matTooltipClass="tooltip" style="color:green; margin-left: 10px;" *ngIf="(item[col].length > 0)">done</mat-icon>
              <mat-icon matTooltip="{{item[col]}}" matTooltipPosition="right" matTooltipClass="tooltip" style="color:red; margin-left: 10px" *ngIf="!(item[col].length > 0)">close</mat-icon>
              
                <!--mat-chip-list >
                  <mat-chip *ngFor="let keyword of item[col]">
                    {{keyword}}
                  </mat-chip>
                </mat-chip-list-->
            </td>
          </div>

          <div *ngSwitchCase="'options'" >
            <td mat-cell *matCellDef="let item">
              
              <button mat-icon-button [matMenuTriggerFor]="menu" class="float-right">
                <mat-icon color="accent">more_vert</mat-icon>
              </button>

              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="onEdit(item)">
                  <mat-icon>edit</mat-icon>
                  <span>Editar</span>
                </button>
                <button mat-menu-item (click)="onDelete(item.id)">
                  <mat-icon>delete_forever</mat-icon>
                  <span>Eliminar</span>
                </button>
              </mat-menu>
              
            </td>
          </div>

          <div *ngSwitchDefault>
            <td class="cell-truncate-text" mat-cell *matCellDef="let item"> 
                <span>{{ item[col] }}</span>
            </td>
            
          </div>

        </div>


    </ng-container>


    <tr mat-header-row *matHeaderRowDef="tableCols"></tr>
    <tr mat-row *matRowDef="let row; columns: tableCols"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons [length]="0" [pageSize]="10"> </mat-paginator>
</div>
<button mat-fab color="accent" class="btn-new mat-elevation-z2 add" (click)="onAdd()">
  <mat-icon style="color: withe;" >add</mat-icon>
</button>